---
layout: default
---
{%- assign games-won = 0 -%}
{%- assign games-lost = 0 -%}
{%- assign games-tied = 0 -%}
{%- assign games-unknown = 0 -%}
{%- assign games = site.games | sort:"number" -%}
{%- assign games_played = "" | split:"," -%}
{%- for game in games -%}
    {%- if game.winners contains page.title or game.losers contains page.title or game.players contains page.title -%}
        {%- assign games_played = games_played | push: game -%}
        {%- if game.winners contains page.title -%}
            {%- assign number-winners = game.winners | size -%}
            {%- if number-winners == 1 -%}
                {%- assign games-won = games-won | plus: 1 -%}
            {%- else -%}
                {%- assign games-tied = games-tied | plus: 1 -%}
            {%- endif -%}
        {%- elsif game.losers contains page.title -%}
            {%- assign games-lost = games-lost | plus: 1 -%}
        {%- else -%}
            {%- assign games-unknown = games-unknown | plus: 1-%}
        {%- endif -%}
    {%- endif -%}
{%- endfor -%}
{%- assign games_played = games_played | sort:"number" -%}
{%- assign sets_created = site.sets | where:"author", page.title -%}
{%- assign sets_created = sets_created | sort:"number" -%}
{%- assign first_game = games_played | first -%}
{%- assign last_game = games_played | last -%}
{%- assign first_set = sets_created | first -%}
{%- assign last_set = sets_created | last -%}
{%- assign first_card = empty -%}
{%- assign cards_created = "" | split:"," -%}
{%- for set in sets_created -%}
    {%- assign cards = site.cards | where:"set.name", set.title -%}
    {%- for card in site.cards -%}
        {%- if card.alternates -%}
            {%- for alt in card.alternates -%}
                {%- if alt.set.name == set.title -%}
                    {%- assign cards = cards | push: alt -%}
                {%- endif -%}
            {%- endfor -%}
        {%- endif -%}
    {%- endfor -%}
    {%- assign cards = cards | sort: "set.number" -%}
    {%- for card in cards -%}
        {%- if first_card == empty -%}
            {%- assign first_card = card -%}
        {%- endif -%}
        {%- assign last_card = card -%}
        {%- assign cards_created = cards_created | push:card -%}
    {%- endfor -%}
{%- endfor -%}
{%- assign num-games-played = games_played | size -%}
{%- assign num-cards-created = cards_created | size -%}
<div class="infobox">
    <div class="infobox-title">{{page.title}}</div>
    {% if page.image.path -%}
    <div class="infobox-image">
        <a href="/assets/images/{{page.image.path}}" target="_blank">
            <img src="/assets/images/{{page.image.path}}" alt="{{page.image.text}}">
        </a>
    </div>
    {%- endif %}
    <table class="infobox-table">
        <tr>
            <th># of Games Played</th>
            <td>{{num-games-played}}</td>
        </tr>
        <tr>
            <th>Games Won/Lost/Tied/Unk</th>
            <td>{{games-won}} / {{games-lost}} / {{games-tied}} / {{games-unknown}}</td>
        </tr>
        <tr>
            <th>First Game</th>
            <td><a href="{{first_game.url}}">{{first_game.title}}</a> ({{first_game.played-date}})</td>
        </tr>
        <tr>
            <th>Latest Game</th>
            <td><a href="{{last_game.url}}">{{last_game.title}}</a> ({{last_game.played-date}})</td>
        </tr>
        <tr>
            <th># of Sets Created</th>
            <td>{{sets_created | size}}</td>
        </tr>
        <tr>
            <th>Average Cards per Set</th>
            <td>{% include average-cards-per-set.html sets=sets_created %}</td>
        </tr>
        <tr>
            <th>First Set</th>
            <td><a href="{{first_set.url}}">{{first_set.title}}</a> ({{first_set.created-date}})</td>
        </tr>
        <tr>
            <th>Latest Set</th>
            <td><a href="{{last_set.url}}">{{last_set.title}}</a> ({{last_set.created-date}})</td>
        </tr>
        <tr>
            <th>Smallest Set(s)</th>
            <td>{% include smallest-set.html sets=sets_created %}</td>
        </tr>
        <tr>
            <th>Largest Set(s)</th>
            <td>{% include largest-set.html sets=sets_created %}</td>
        </tr>
        <tr>
            <th># of Cards Created</th>
            <td>{{num-cards-created}}</td>
        </tr>
        <tr>
            <th>Average Cards Created per Game</th>
            <td>{% include average-cards-per-game.html games=games_played player=page.title sets-created=sets_created %}</td>
        </tr>
        <tr>
            <th>Least Cards Created in a Game</th>
            <td>{% include smallest-cards-in-game.html games=games_played player=page.title sets-created=sets_created %}</td>
        </tr>
        <tr>
            <th>Most Cards Created in a Game</th>
            <td>{% include largest-cards-in-game.html games=games_played player=page.title sets-created=sets_created %}</td>
        </tr>
        <tr>
            <th>First Card</th>
            <td><a href="{{first_card.url}}">{{first_card.title}}</a> ({% include card-created-date.html card=first_card %})</td>
        </tr>
        <tr>
            <th>Latest Card</th>
            <td><a href="{{last_card.url}}">{{last_card.title}}</a> ({% include card-created-date.html card=last_card %})</td>
        </tr>
    </table>
</div>
{{content | markdownify}}
<h2 id="sets-created">Sets Created</h2>
<ul>
{% for set in sets_created -%}
    <li><a href="{{set.url}}">{{set.title}}</a></li>
    {%- endfor %}
</ul>

<h2 id="cards-created">Cards Created</h2>
{% include card-grid.html cards=cards_created %}